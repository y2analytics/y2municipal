rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
result
) %>%
pivot_wider(
names_from = Weeks_since_order,
values_from = result
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
n
) %>%
pivot_wider(
names_from = Weeks_since_order,
values_from = result
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
result
) %>%
pivot_wider(
names_from = Weeks_since_order,
values_from = result
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
result
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
n
) %>%
pivot_wider(
names_from = Weeks_since_order,
values_from = result
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
n
)
responses %>%
select(
ResponseId,
brand1,
brand2
) %>%
pivot_longer(
!1
) %>%
rename(
brand = value
) %>%
left_join(
responses %>%
select(
ResponseId,
brand1_date,
brand2_date
) %>%
pivot_longer(
!1
) %>%
mutate(
name = str_remove(name, '_date')
) %>%
rename(
date = value
)
) %>%
left_join(
responses %>%
select(
ResponseId,
RecordedDate
)
) %>%
filter(
brand != ''
) %>%
mutate(
date = date %>% mdy(),
weeks = lubridate::interval(date, RecordedDate) %>% as.period() %>% day() / 7,
weeks = case_when(
weeks <= 1 ~ 'Week 1',
weeks <= 2 ~ 'Week 2',
weeks <= 4 ~ 'Weeks 3-4'
)
) %>%
group_by(
weeks
) %>%
freq(
brand
) %>%
arrange(
group_var,
result %>% desc
) %>%
mutate(
result = str_c(result * 100, '%')
) %>%
select(
Weeks_since_order = group_var,
Brand = label,
n
) %>%
pivot_wider(
names_from = Weeks_since_order,
values_from = n
)
mtcars %>% freqs(hp) %>% append_ns()
